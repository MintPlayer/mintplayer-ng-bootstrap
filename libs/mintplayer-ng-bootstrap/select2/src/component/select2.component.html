<!-- <bs-dropdown [(isOpen)]="isOpen" [hasBackdrop]="false" #itemsBox class="items-box text-wrap"></bs-dropdown> -->
<bs-has-overlay></bs-has-overlay>
<div bsDropdown [(isOpen)]="isOpen" [hasBackdrop]="false" [sameDropdownWidth]="true" #itemsBox class="items-box text-wrap"
    cdkDropList [cdkDropListOrientation]="'horizontal'" [cdkDropListData]="selectedItems" (cdkDropListDropped)="itemDropped($event)">
    <ng-container *ngFor="let item of selectedItems">
        <span cdkDrag class="d-inline-block">
            <ng-container *ngTemplateOutlet="itemTemplate ?? defaultItemTemplate; context: { item: item, select2: this }"></ng-container>
        </span>
    </ng-container>

    <input type="text" autocomplete="off"
        [(ngModel)]="searchterm"
        (ngModelChange)="onProvideSuggestions($event)"
        (focus)="isFocused=true"
        (blur)="isFocused=false"
        [style.width.px]="searchWidth"
        #searchBox />
    <bs-dropdown-menu *bsDropdownMenu [maxHeight]="200">
        <bs-dropdown-item *ngFor="let suggestion of suggestions" (click)="onSuggestionClicked(suggestion)" [isSelected]="selectedItems | inList:suggestion.id">
            <ng-container *ngTemplateOutlet="suggestionTemplate ?? defaultSuggestionTemplate; context: { suggestion: suggestion, select2: this }"></ng-container>
        </bs-dropdown-item>
    </bs-dropdown-menu>
</div>

<ng-template #defaultItemTemplate let-item="item" let-select2="select2">
    <span class="select2-item">
        <span (click)="select2.onRemoveItem(item,$event)">Ã—</span>
        {{ item.text }}
    </span>
</ng-template>

<ng-template #defaultSuggestionTemplate let-suggestion="suggestion" let-select2="select2">
    {{ suggestion.text }}
</ng-template>